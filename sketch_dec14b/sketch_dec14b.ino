int speakerPin = D3;


int melody[] = { 
196, 233, 220, 0, 175, 196, 196, 196, 233, 220, 0, 175, 147, 116, 131, 0, 110, 116, 116, 98, 110, 0, 87, 147, 116, 131, 0, 110, 116, 116, 98, 110, 0, 87, 175, 139, 156, 0, 131, 139, 139, 116, 131, 0, 104, 175, 139, 156, 0, 131, 139, 139, 116, 131, 0, 110, 0, 0, 175, 196, 0, 165, 175, 175, 147, 165, 0, 131, 220, 175, 196, 0, 165, 175, 175, 165, 147, 0, 131, 220, 175, 196, 0, 165, 175, 175, 147, 165, 0, 131, 220, 175, 196, 0, 165, 175, 175, 165, 147, 0, 131, 220, 175, 196, 0, 165, 175, 175, 147, 165, 0, 131, 220, 175, 196, 0, 165, 175, 175, 165, 147, 0, 131, 220, 175, 196, 0, 165, 175, 175, 147, 165, 0, 131, 220, 175, 196, 0, 165, 175, 175, 165, 147, 0, 139, 147, 147, 147, 147, 165, 175, 165, 147, 139, 110, 139, 147, 110, 139, 165, 131, 165, 175, 131, 175, 185, 196, 196, 196, 196, 196, 147, 196, 175, 165, 131, 0, 175, 196, 196, 196, 196, 196, 147, 196, 196, 185, 185, 196, 196, 233, 220, 0, 175, 196, 196, 196, 233, 220, 0, 175, 196, 233, 220, 0, 196, 196, 196, 175, 147, 0, 175, 196, 233, 220, 0, 175, 196, 196, 196, 233, 220, 0, 175, 196, 233, 220, 0, 196, 220, 175, 175, 294, 262, 196, 233, 220, 0, 175, 196, 196, 196, 233, 220, 0, 175, 196, 233, 220, 0, 196, 196, 196, 175, 147, 0, 175, 196, 233, 220, 0, 175, 196, 196, 196, 233, 220, 0, 175, 175, 196, 233, 220, 0, 196, 175, 196, 196, 196, 0, 0, 392, 466, 0, 523, 415, 415, 392, 349, 311, 349, 523, 104, 131, 196, 116, 175, 208, 466, 523, 392, 0, 311, 349, 311, 262, 311, 98, 147, 175, 131, 156, 349, 294, 294, 415, 392, 784, 698, 587, 104, 131, 196, 123, 147, 196, 622, 587, 587, 466, 523, 466, 392, 466, 131, 156, 98, 156, 196, 156, 98, 523, 415, 415, 392, 349, 587, 523, 466, 104, 131, 196, 104, 131, 196, 104, 131, 196, 104, 131, 196, 0, 116, 175, 208, 116, 175, 208, 466, 523, 587, 622, 622, 392, 349, 392, 349, 98, 147, 175, 98, 147, 175, 98, 147, 175, 98, 147, 175, 0, 131, 156, 131, 156, 311, 262, 262, 311, 294, 294, 294, 294, 104, 131, 208, 104, 131, 208, 104, 131, 208, 104, 131, 208, 0, 98, 147, 175, 98, 147, 175, 0, 196, 262, 196, 262, 0, 196, 262, 196, 262, 233, 262, 311, 466, 98, 131, 98, 131, 0, 0, 131, 131, 0, 523, 466, 0, 392, 0, 262, 247, 311, 349, 392, 262, 622, 587, 52, 104, 104, 156, 208, 52, 104, 49, 98, 49, 98, 49, 262, 466, 392, 0, 466, 262, 311, 466, 523, 278, 466, 392, 233, 349, 262, 65, 131, 131, 0, 65, 131, 59, 116, 59, 116, 59, 262, 392, 349, 0, 311, 0, 262, 247, 415, 247, 392, 294, 52, 104, 104, 156, 208, 52, 104, 49, 98, 49, 98, 49, 262, 349, 311, 466, 466, 415, 0, 392, 233, 233, 262, 311, 466, 65, 131, 131, 262, 311, 65, 131, 59, 116, 59, 156, 77, 262, 392, 349, 0, 311, 0, 262, 247, 311, 349, 392, 262, 622, 587, 52, 104, 104, 156, 208, 52, 104, 49, 98, 49, 98, 49, 262, 466, 392, 0, 466, 262, 311, 466, 523, 278, 466, 392, 349, 262, 311, 466, 65, 131, 131, 0, 65, 131, 59, 116, 59, 116, 59, 262, 392, 349, 0, 311, 0, 262, 247, 415, 247, 392, 294, 52, 104, 104, 156, 208, 52, 104, 49, 98, 49, 98, 49, 0, 233, 262, 311, 349, 392, 523, 466, 349, 392, 262, 311, 0, 65, 131, 0, 65, 131, 0, 65, 131, 65, 131, 65, 131, 65, 262, 294, 311, 294, 0, 233, 196, 233, 52, 104, 0, 0, 104, 52, 49, 0, 0, 98, 49, 0, 262, 233, 233, 262, 311, 349, 131, 156, 0, 131, 131, 0, 131, 156, 0, 98, 116, 0, 59, 116, 392, 233, 262, 392, 349, 466, 415, 415, 104, 131, 0, 52, 52, 98, 147, 0, 98, 147, 0, 0, 392, 392, 523, 0 
};
int noteDurations[] = { 
328, 164, 164, 164, 328, 164, 164, 164, 164, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 1312, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 328, 164, 164, 492, 492, 164, 164, 164, 164, 164, 164, 164, 656, 246, 82, 328, 246, 82, 328, 246, 82, 328, 246, 82, 492, 164, 164, 164, 164, 164, 328, 328, 328, 164, 164, 164, 328, 164, 164, 164, 164, 164, 328, 328, 492, 164, 656, 164, 164, 164, 164, 164, 328, 164, 164, 164, 164, 164, 164, 492, 328, 164, 164, 164, 328, 164, 328, 164, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 164, 164, 164, 164, 492, 328, 164, 164, 164, 164, 164, 164, 164, 492, 656, 328, 164, 164, 164, 328, 164, 164, 164, 164, 164, 164, 492, 328, 164, 164, 164, 328, 164, 328, 164, 164, 164, 492, 328, 164, 164, 164, 328, 164, 164, 164, 164, 164, 164, 328, 164, 328, 164, 164, 164, 164, 164, 164, 1312, 1312, 920, 460, 230, 230, 1840, 345, 115, 230, 230, 230, 230, 230, 230, 920, 920, 920, 920, 920, 920, 230, 115, 115, 115, 115, 230, 460, 230, 230, 920, 920, 920, 920, 920, 345, 115, 230, 230, 230, 230, 230, 230, 920, 920, 920, 920, 920, 920, 345, 115, 230, 230, 230, 230, 230, 230, 920, 920, 460, 460, 460, 230, 230, 345, 115, 230, 230, 230, 230, 230, 230, 460, 460, 460, 345, 345, 345, 115, 115, 115, 115, 115, 115, 115, 460, 460, 460, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 115, 115, 460, 460, 460, 345, 345, 345, 115, 115, 115, 115, 115, 115, 115, 460, 460, 230, 230, 345, 115, 230, 230, 345, 115, 230, 230, 460, 460, 460, 345, 345, 345, 115, 115, 115, 115, 115, 115, 115, 460, 460, 460, 230, 230, 230, 230, 230, 230, 230, 230, 230, 345, 345, 115, 115, 115, 115, 115, 115, 115, 115, 115, 115, 230, 230, 115, 115, 920, 115, 115, 115, 230, 115, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 115, 115, 115, 115, 115, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 115, 115, 115, 115, 230, 115, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 230, 115, 115, 230, 115, 115, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 115, 115, 115, 115, 230, 115, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 115, 115, 115, 115, 115, 230, 230, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 115, 115, 115, 115, 230, 115, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 230, 230, 115, 115, 115, 115, 115, 115, 115, 115, 115, 115, 230, 230, 230, 230, 115, 115, 115, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 230, 115, 115, 230, 115, 345, 115, 115, 230, 230, 460, 230, 230, 230, 230, 230, 230, 230, 115, 115, 115, 115, 230, 230, 115, 345, 345, 115, 115, 230, 230, 230, 230, 230, 230, 230, 230, 230, 460, 460, 115, 345, 115, 115, 115, 230, 230, 230, 230, 230, 460, 230, 230, 0 
};



int length = sizeof(noteDurations);

void setup() {
    pinMode(speakerPin, OUTPUT);

}

void loop() {
    for (int thisNote = 0; thisNote < length ; thisNote++)
  {    
    tone(speakerPin, melody[thisNote], noteDurations[thisNote] * .7);    
    delay(noteDurations[thisNote]);    
    noTone(speakerPin);
  }
}

void playNote(int OutputPin, char note, unsigned long duration) {
   // 音符字元與對應的頻率由兩個矩陣表示
  char names[] = { 'c', 'd', 'e', 'f', 'g', 'a', 'b', 'C' };
  int tones[] = { 261, 294, 330, 349, 392, 440, 494, 523 };
  // 播放音符對應的頻率
  for (int i = 0; i < 8; i++) {
    if (names[i] == note) {
      tone(OutputPin,tones[i], duration);
  //下方的 delay() 及 noTone ()，測試過後一定要有這兩行，整體的撥放出來的東西才不會亂掉，可能是因為 Arduino 送出tone () 頻率後會馬上接著執行下個指令，不會等聲音播完，導致撥出的聲音混合而亂掉
      delay(duration);
      noTone(OutputPin);
    }
  }
}
